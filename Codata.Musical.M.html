<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Musical.M</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- M-types (the dual of W-types)</a>
<a id="139" class="Comment">------------------------------------------------------------------------</a>

<a id="213" class="Symbol">{-#</a> <a id="217" class="Keyword">OPTIONS</a> <a id="225" class="Option">--without-K</a> <a id="237" class="Option">--safe</a> <a id="244" class="Symbol">#-}</a>

<a id="249" class="Keyword">module</a> <a id="256" href="Codata.Musical.M.html" class="Module">Codata.Musical.M</a> <a id="273" class="Keyword">where</a>

<a id="280" class="Keyword">open</a> <a id="285" class="Keyword">import</a> <a id="292" href="Codata.Musical.Notation.html" class="Module">Codata.Musical.Notation</a>
<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Level.html" class="Module">Level</a>
<a id="334" class="Keyword">open</a> <a id="339" class="Keyword">import</a> <a id="346" href="Data.Product.html" class="Module">Data.Product</a> <a id="359" class="Keyword">hiding</a> <a id="366" class="Symbol">(</a><a id="367" href="Data.Product.html#2190" class="Function">map</a><a id="370" class="Symbol">)</a>
<a id="372" class="Keyword">open</a> <a id="377" class="Keyword">import</a> <a id="384" href="Data.Container.Core.html" class="Module">Data.Container.Core</a> <a id="404" class="Keyword">hiding</a> <a id="411" class="Symbol">(</a><a id="412" href="Data.Container.Core.html#875" class="Function">map</a><a id="415" class="Symbol">)</a>

<a id="418" class="Comment">-- The family of M-types.</a>

<a id="445" class="Keyword">data</a> <a id="M"></a><a id="450" href="Codata.Musical.M.html#450" class="Datatype">M</a> <a id="452" class="Symbol">{</a><a id="453" href="Codata.Musical.M.html#453" class="Bound">s</a> <a id="455" href="Codata.Musical.M.html#455" class="Bound">p</a><a id="456" class="Symbol">}</a> <a id="458" class="Symbol">(</a><a id="459" href="Codata.Musical.M.html#459" class="Bound">C</a> <a id="461" class="Symbol">:</a> <a id="463" href="Data.Container.Core.html#553" class="Record">Container</a> <a id="473" href="Codata.Musical.M.html#453" class="Bound">s</a> <a id="475" href="Codata.Musical.M.html#455" class="Bound">p</a><a id="476" class="Symbol">)</a> <a id="478" class="Symbol">:</a> <a id="480" class="PrimitiveType">Set</a> <a id="484" class="Symbol">(</a><a id="485" href="Codata.Musical.M.html#453" class="Bound">s</a> <a id="487" href="Agda.Primitive.html#657" class="Primitive Operator">⊔</a> <a id="489" href="Codata.Musical.M.html#455" class="Bound">p</a><a id="490" class="Symbol">)</a> <a id="492" class="Keyword">where</a>
  <a id="M.inf"></a><a id="500" href="Codata.Musical.M.html#500" class="InductiveConstructor">inf</a> <a id="504" class="Symbol">:</a> <a id="506" href="Data.Container.Core.html#750" class="Function Operator">⟦</a> <a id="508" href="Codata.Musical.M.html#459" class="Bound">C</a> <a id="510" href="Data.Container.Core.html#750" class="Function Operator">⟧</a> <a id="512" class="Symbol">(</a><a id="513" href="Agda.Builtin.Coinduction.html#96" class="Record">∞</a> <a id="515" class="Symbol">(</a><a id="516" href="Codata.Musical.M.html#450" class="Datatype">M</a> <a id="518" href="Codata.Musical.M.html#459" class="Bound">C</a><a id="519" class="Symbol">))</a> <a id="522" class="Symbol">→</a> <a id="524" href="Codata.Musical.M.html#450" class="Datatype">M</a> <a id="526" href="Codata.Musical.M.html#459" class="Bound">C</a>

<a id="529" class="Comment">-- Projections.</a>

<a id="546" class="Keyword">module</a> <a id="553" href="Codata.Musical.M.html#553" class="Module">_</a> <a id="555" class="Symbol">{</a><a id="556" href="Codata.Musical.M.html#556" class="Bound">s</a> <a id="558" href="Codata.Musical.M.html#558" class="Bound">p</a><a id="559" class="Symbol">}</a> <a id="561" class="Symbol">(</a><a id="562" href="Codata.Musical.M.html#562" class="Bound">C</a> <a id="564" class="Symbol">:</a> <a id="566" href="Data.Container.Core.html#553" class="Record">Container</a> <a id="576" href="Codata.Musical.M.html#556" class="Bound">s</a> <a id="578" href="Codata.Musical.M.html#558" class="Bound">p</a><a id="579" class="Symbol">)</a> <a id="581" class="Keyword">where</a>

  <a id="590" href="Codata.Musical.M.html#590" class="Function">head</a> <a id="595" class="Symbol">:</a> <a id="597" href="Codata.Musical.M.html#450" class="Datatype">M</a> <a id="599" href="Codata.Musical.M.html#562" class="Bound">C</a> <a id="601" class="Symbol">→</a> <a id="603" href="Data.Container.Core.html#633" class="Field">Shape</a> <a id="609" href="Codata.Musical.M.html#562" class="Bound">C</a>
  <a id="613" href="Codata.Musical.M.html#590" class="Function">head</a> <a id="618" class="Symbol">(</a><a id="619" href="Codata.Musical.M.html#500" class="InductiveConstructor">inf</a> <a id="623" class="Symbol">(</a><a id="624" href="Codata.Musical.M.html#624" class="Bound">x</a> <a id="626" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="628" class="Symbol">_))</a> <a id="632" class="Symbol">=</a> <a id="634" href="Codata.Musical.M.html#624" class="Bound">x</a>

  <a id="639" href="Codata.Musical.M.html#639" class="Function">tail</a> <a id="644" class="Symbol">:</a> <a id="646" class="Symbol">(</a><a id="647" href="Codata.Musical.M.html#647" class="Bound">x</a> <a id="649" class="Symbol">:</a> <a id="651" href="Codata.Musical.M.html#450" class="Datatype">M</a> <a id="653" href="Codata.Musical.M.html#562" class="Bound">C</a><a id="654" class="Symbol">)</a> <a id="656" class="Symbol">→</a> <a id="658" href="Data.Container.Core.html#654" class="Field">Position</a> <a id="667" href="Codata.Musical.M.html#562" class="Bound">C</a> <a id="669" class="Symbol">(</a><a id="670" href="Codata.Musical.M.html#590" class="Function">head</a> <a id="675" href="Codata.Musical.M.html#647" class="Bound">x</a><a id="676" class="Symbol">)</a> <a id="678" class="Symbol">→</a> <a id="680" href="Codata.Musical.M.html#450" class="Datatype">M</a> <a id="682" href="Codata.Musical.M.html#562" class="Bound">C</a>
  <a id="686" href="Codata.Musical.M.html#639" class="Function">tail</a> <a id="691" class="Symbol">(</a><a id="692" href="Codata.Musical.M.html#500" class="InductiveConstructor">inf</a> <a id="696" class="Symbol">(</a><a id="697" href="Codata.Musical.M.html#697" class="Bound">x</a> <a id="699" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="701" href="Codata.Musical.M.html#701" class="Bound">f</a><a id="702" class="Symbol">))</a> <a id="705" href="Codata.Musical.M.html#705" class="Bound">b</a> <a id="707" class="Symbol">=</a> <a id="709" href="Agda.Builtin.Coinduction.html#164" class="Field">♭</a> <a id="711" class="Symbol">(</a><a id="712" href="Codata.Musical.M.html#701" class="Bound">f</a> <a id="714" href="Codata.Musical.M.html#705" class="Bound">b</a><a id="715" class="Symbol">)</a>

<a id="718" class="Comment">-- map</a>

<a id="726" class="Keyword">module</a> <a id="733" href="Codata.Musical.M.html#733" class="Module">_</a> <a id="735" class="Symbol">{</a><a id="736" href="Codata.Musical.M.html#736" class="Bound">s₁</a> <a id="739" href="Codata.Musical.M.html#739" class="Bound">s₂</a> <a id="742" href="Codata.Musical.M.html#742" class="Bound">p₁</a> <a id="745" href="Codata.Musical.M.html#745" class="Bound">p₂</a><a id="747" class="Symbol">}</a> <a id="749" class="Symbol">{</a><a id="750" href="Codata.Musical.M.html#750" class="Bound">C₁</a> <a id="753" class="Symbol">:</a> <a id="755" href="Data.Container.Core.html#553" class="Record">Container</a> <a id="765" href="Codata.Musical.M.html#736" class="Bound">s₁</a> <a id="768" href="Codata.Musical.M.html#742" class="Bound">p₁</a><a id="770" class="Symbol">}</a> <a id="772" class="Symbol">{</a><a id="773" href="Codata.Musical.M.html#773" class="Bound">C₂</a> <a id="776" class="Symbol">:</a> <a id="778" href="Data.Container.Core.html#553" class="Record">Container</a> <a id="788" href="Codata.Musical.M.html#739" class="Bound">s₂</a> <a id="791" href="Codata.Musical.M.html#745" class="Bound">p₂</a><a id="793" class="Symbol">}</a>
         <a id="804" class="Symbol">(</a><a id="805" href="Codata.Musical.M.html#805" class="Bound">m</a> <a id="807" class="Symbol">:</a> <a id="809" href="Codata.Musical.M.html#750" class="Bound">C₁</a> <a id="812" href="Data.Container.Core.html#1030" class="Record Operator">⇒</a> <a id="814" href="Codata.Musical.M.html#773" class="Bound">C₂</a><a id="816" class="Symbol">)</a> <a id="818" class="Keyword">where</a>

  <a id="827" href="Codata.Musical.M.html#827" class="Function">map</a> <a id="831" class="Symbol">:</a> <a id="833" href="Codata.Musical.M.html#450" class="Datatype">M</a> <a id="835" href="Codata.Musical.M.html#750" class="Bound">C₁</a> <a id="838" class="Symbol">→</a> <a id="840" href="Codata.Musical.M.html#450" class="Datatype">M</a> <a id="842" href="Codata.Musical.M.html#773" class="Bound">C₂</a>
  <a id="847" href="Codata.Musical.M.html#827" class="Function">map</a> <a id="851" class="Symbol">(</a><a id="852" href="Codata.Musical.M.html#500" class="InductiveConstructor">inf</a> <a id="856" class="Symbol">(</a><a id="857" href="Codata.Musical.M.html#857" class="Bound">x</a> <a id="859" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="861" href="Codata.Musical.M.html#861" class="Bound">f</a><a id="862" class="Symbol">))</a> <a id="865" class="Symbol">=</a> <a id="867" href="Codata.Musical.M.html#500" class="InductiveConstructor">inf</a> <a id="871" class="Symbol">(</a><a id="872" href="Data.Container.Core.html#1167" class="Field">shape</a> <a id="878" href="Codata.Musical.M.html#805" class="Bound">m</a> <a id="880" href="Codata.Musical.M.html#857" class="Bound">x</a> <a id="882" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="884" class="Symbol">λ</a> <a id="886" href="Codata.Musical.M.html#886" class="Bound">p</a> <a id="888" class="Symbol">→</a> <a id="890" href="Agda.Builtin.Coinduction.html#129" class="CoinductiveConstructor Operator">♯</a> <a id="892" href="Codata.Musical.M.html#827" class="Function">map</a> <a id="896" class="Symbol">(</a><a id="897" href="Agda.Builtin.Coinduction.html#164" class="Field">♭</a> <a id="899" class="Symbol">(</a><a id="900" href="Codata.Musical.M.html#861" class="Bound">f</a> <a id="902" class="Symbol">(</a><a id="903" href="Data.Container.Core.html#1202" class="Field">position</a> <a id="912" href="Codata.Musical.M.html#805" class="Bound">m</a> <a id="914" href="Codata.Musical.M.html#886" class="Bound">p</a><a id="915" class="Symbol">))))</a>


<a id="922" class="Comment">-- unfold</a>

<a id="933" class="Keyword">module</a> <a id="940" href="Codata.Musical.M.html#940" class="Module">_</a> <a id="942" class="Symbol">{</a><a id="943" href="Codata.Musical.M.html#943" class="Bound">s</a> <a id="945" href="Codata.Musical.M.html#945" class="Bound">p</a> <a id="947" href="Codata.Musical.M.html#947" class="Bound">ℓ</a><a id="948" class="Symbol">}</a> <a id="950" class="Symbol">{</a><a id="951" href="Codata.Musical.M.html#951" class="Bound">C</a> <a id="953" class="Symbol">:</a> <a id="955" href="Data.Container.Core.html#553" class="Record">Container</a> <a id="965" href="Codata.Musical.M.html#943" class="Bound">s</a> <a id="967" href="Codata.Musical.M.html#945" class="Bound">p</a><a id="968" class="Symbol">}</a> <a id="970" class="Symbol">(</a><a id="971" class="Keyword">open</a> <a id="976" href="Data.Container.Core.html#553" class="Module">Container</a> <a id="986" href="Codata.Musical.M.html#951" class="Bound">C</a><a id="987" class="Symbol">)</a>
         <a id="998" class="Symbol">{</a><a id="999" href="Codata.Musical.M.html#999" class="Bound">S</a> <a id="1001" class="Symbol">:</a> <a id="1003" class="PrimitiveType">Set</a> <a id="1007" href="Codata.Musical.M.html#947" class="Bound">ℓ</a><a id="1008" class="Symbol">}</a> <a id="1010" class="Symbol">(</a><a id="1011" href="Codata.Musical.M.html#1011" class="Bound">alg</a> <a id="1015" class="Symbol">:</a> <a id="1017" href="Codata.Musical.M.html#999" class="Bound">S</a> <a id="1019" class="Symbol">→</a> <a id="1021" href="Data.Container.Core.html#750" class="Function Operator">⟦</a> <a id="1023" href="Codata.Musical.M.html#951" class="Bound">C</a> <a id="1025" href="Data.Container.Core.html#750" class="Function Operator">⟧</a> <a id="1027" href="Codata.Musical.M.html#999" class="Bound">S</a><a id="1028" class="Symbol">)</a> <a id="1030" class="Keyword">where</a>

  <a id="1039" href="Codata.Musical.M.html#1039" class="Function">unfold</a> <a id="1046" class="Symbol">:</a> <a id="1048" href="Codata.Musical.M.html#999" class="Bound">S</a> <a id="1050" class="Symbol">→</a> <a id="1052" href="Codata.Musical.M.html#450" class="Datatype">M</a> <a id="1054" href="Codata.Musical.M.html#951" class="Bound">C</a>
  <a id="1058" href="Codata.Musical.M.html#1039" class="Function">unfold</a> <a id="1065" href="Codata.Musical.M.html#1065" class="Bound">seed</a> <a id="1070" class="Symbol">=</a> <a id="1072" class="Keyword">let</a> <a id="1076" class="Symbol">(</a><a id="1077" href="Codata.Musical.M.html#1077" class="Bound">x</a> <a id="1079" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1081" href="Codata.Musical.M.html#1081" class="Bound">f</a><a id="1082" class="Symbol">)</a> <a id="1084" class="Symbol">=</a> <a id="1086" href="Codata.Musical.M.html#1011" class="Bound">alg</a> <a id="1090" href="Codata.Musical.M.html#1065" class="Bound">seed</a> <a id="1095" class="Keyword">in</a>
                <a id="1114" href="Codata.Musical.M.html#500" class="InductiveConstructor">inf</a> <a id="1118" class="Symbol">(</a><a id="1119" href="Codata.Musical.M.html#1077" class="Bound">x</a> <a id="1121" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1123" class="Symbol">λ</a> <a id="1125" href="Codata.Musical.M.html#1125" class="Bound">p</a> <a id="1127" class="Symbol">→</a> <a id="1129" href="Agda.Builtin.Coinduction.html#129" class="CoinductiveConstructor Operator">♯</a> <a id="1131" href="Codata.Musical.M.html#1039" class="Function">unfold</a> <a id="1138" class="Symbol">(</a><a id="1139" href="Codata.Musical.M.html#1081" class="Bound">f</a> <a id="1141" href="Codata.Musical.M.html#1125" class="Bound">p</a><a id="1142" class="Symbol">))</a>
</pre></body></html>