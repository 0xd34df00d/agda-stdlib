<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Musical.M</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- M-types (the dual of W-types)</a>
<a id="139" class="Comment">------------------------------------------------------------------------</a>

<a id="213" class="Symbol">{-#</a> <a id="217" class="Keyword">OPTIONS</a> <a id="225" class="Option">--without-K</a> <a id="237" class="Symbol">#-}</a>

<a id="242" class="Keyword">module</a> <a id="249" href="Codata.Musical.M.html" class="Module">Codata.Musical.M</a> <a id="266" class="Keyword">where</a>

<a id="273" class="Keyword">open</a> <a id="278" class="Keyword">import</a> <a id="285" href="Codata.Musical.Notation.html" class="Module">Codata.Musical.Notation</a>
<a id="309" class="Keyword">open</a> <a id="314" class="Keyword">import</a> <a id="321" href="Level.html" class="Module">Level</a>
<a id="327" class="Keyword">open</a> <a id="332" class="Keyword">import</a> <a id="339" href="Data.Product.html" class="Module">Data.Product</a> <a id="352" class="Keyword">hiding</a> <a id="359" class="Symbol">(</a><a id="360" href="Data.Product.html#2183" class="Function">map</a><a id="363" class="Symbol">)</a>
<a id="365" class="Keyword">open</a> <a id="370" class="Keyword">import</a> <a id="377" href="Data.Container.Core.html" class="Module">Data.Container.Core</a>

<a id="398" class="Comment">-- The family of M-types.</a>

<a id="425" class="Keyword">data</a> <a id="M"></a><a id="430" href="Codata.Musical.M.html#430" class="Datatype">M</a> <a id="432" class="Symbol">{</a><a id="433" href="Codata.Musical.M.html#433" class="Bound">s</a> <a id="435" href="Codata.Musical.M.html#435" class="Bound">p</a><a id="436" class="Symbol">}</a> <a id="438" class="Symbol">(</a><a id="439" href="Codata.Musical.M.html#439" class="Bound">C</a> <a id="441" class="Symbol">:</a> <a id="443" href="Data.Container.Core.html#415" class="Record">Container</a> <a id="453" href="Codata.Musical.M.html#433" class="Bound">s</a> <a id="455" href="Codata.Musical.M.html#435" class="Bound">p</a><a id="456" class="Symbol">)</a> <a id="458" class="Symbol">:</a> <a id="460" class="PrimitiveType">Set</a> <a id="464" class="Symbol">(</a><a id="465" href="Codata.Musical.M.html#433" class="Bound">s</a> <a id="467" href="Agda.Primitive.html#657" class="Primitive Operator">⊔</a> <a id="469" href="Codata.Musical.M.html#435" class="Bound">p</a><a id="470" class="Symbol">)</a> <a id="472" class="Keyword">where</a>
  <a id="M.inf"></a><a id="480" href="Codata.Musical.M.html#480" class="InductiveConstructor">inf</a> <a id="484" class="Symbol">:</a> <a id="486" href="Data.Container.Core.html#605" class="Function Operator">⟦</a> <a id="488" href="Codata.Musical.M.html#439" class="Bound">C</a> <a id="490" href="Data.Container.Core.html#605" class="Function Operator">⟧</a> <a id="492" class="Symbol">(</a><a id="493" href="Agda.Builtin.Coinduction.html#96" class="Record">∞</a> <a id="495" class="Symbol">(</a><a id="496" href="Codata.Musical.M.html#430" class="Datatype">M</a> <a id="498" href="Codata.Musical.M.html#439" class="Bound">C</a><a id="499" class="Symbol">))</a> <a id="502" class="Symbol">→</a> <a id="504" href="Codata.Musical.M.html#430" class="Datatype">M</a> <a id="506" href="Codata.Musical.M.html#439" class="Bound">C</a>

<a id="509" class="Comment">-- Projections.</a>

<a id="526" class="Keyword">module</a> <a id="533" href="Codata.Musical.M.html#533" class="Module">_</a> <a id="535" class="Symbol">{</a><a id="536" href="Codata.Musical.M.html#536" class="Bound">s</a> <a id="538" href="Codata.Musical.M.html#538" class="Bound">p</a><a id="539" class="Symbol">}</a> <a id="541" class="Symbol">(</a><a id="542" href="Codata.Musical.M.html#542" class="Bound">C</a> <a id="544" class="Symbol">:</a> <a id="546" href="Data.Container.Core.html#415" class="Record">Container</a> <a id="556" href="Codata.Musical.M.html#536" class="Bound">s</a> <a id="558" href="Codata.Musical.M.html#538" class="Bound">p</a><a id="559" class="Symbol">)</a> <a id="561" class="Symbol">(</a><a id="562" class="Keyword">open</a> <a id="567" href="Data.Container.Core.html#415" class="Module">Container</a> <a id="577" href="Codata.Musical.M.html#542" class="Bound">C</a><a id="578" class="Symbol">)</a> <a id="580" class="Keyword">where</a>

  <a id="589" href="Codata.Musical.M.html#589" class="Function">head</a> <a id="594" class="Symbol">:</a> <a id="596" href="Codata.Musical.M.html#430" class="Datatype">M</a> <a id="598" href="Codata.Musical.M.html#542" class="Bound">C</a> <a id="600" class="Symbol">→</a> <a id="602" href="Data.Container.Core.html#495" class="Field">Shape</a>
  <a id="610" href="Codata.Musical.M.html#589" class="Function">head</a> <a id="615" class="Symbol">(</a><a id="616" href="Codata.Musical.M.html#480" class="InductiveConstructor">inf</a> <a id="620" class="Symbol">(</a><a id="621" href="Codata.Musical.M.html#621" class="Bound">x</a> <a id="623" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="625" class="Symbol">_))</a> <a id="629" class="Symbol">=</a> <a id="631" href="Codata.Musical.M.html#621" class="Bound">x</a>

  <a id="636" href="Codata.Musical.M.html#636" class="Function">tail</a> <a id="641" class="Symbol">:</a> <a id="643" class="Symbol">(</a><a id="644" href="Codata.Musical.M.html#644" class="Bound">x</a> <a id="646" class="Symbol">:</a> <a id="648" href="Codata.Musical.M.html#430" class="Datatype">M</a> <a id="650" href="Codata.Musical.M.html#542" class="Bound">C</a><a id="651" class="Symbol">)</a> <a id="653" class="Symbol">→</a> <a id="655" href="Data.Container.Core.html#516" class="Field">Position</a> <a id="664" class="Symbol">(</a><a id="665" href="Codata.Musical.M.html#589" class="Function">head</a> <a id="670" href="Codata.Musical.M.html#644" class="Bound">x</a><a id="671" class="Symbol">)</a> <a id="673" class="Symbol">→</a> <a id="675" href="Codata.Musical.M.html#430" class="Datatype">M</a> <a id="677" href="Codata.Musical.M.html#542" class="Bound">C</a>
  <a id="681" href="Codata.Musical.M.html#636" class="Function">tail</a> <a id="686" class="Symbol">(</a><a id="687" href="Codata.Musical.M.html#480" class="InductiveConstructor">inf</a> <a id="691" class="Symbol">(</a><a id="692" href="Codata.Musical.M.html#692" class="Bound">x</a> <a id="694" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="696" href="Codata.Musical.M.html#696" class="Bound">f</a><a id="697" class="Symbol">))</a> <a id="700" href="Codata.Musical.M.html#700" class="Bound">b</a> <a id="702" class="Symbol">=</a> <a id="704" href="Agda.Builtin.Coinduction.html#164" class="Field">♭</a> <a id="706" class="Symbol">(</a><a id="707" href="Codata.Musical.M.html#696" class="Bound">f</a> <a id="709" href="Codata.Musical.M.html#700" class="Bound">b</a><a id="710" class="Symbol">)</a>

<a id="713" class="Comment">-- map</a>

<a id="721" class="Keyword">module</a> <a id="728" href="Codata.Musical.M.html#728" class="Module">_</a> <a id="730" class="Symbol">{</a><a id="731" href="Codata.Musical.M.html#731" class="Bound">s₁</a> <a id="734" href="Codata.Musical.M.html#734" class="Bound">s₂</a> <a id="737" href="Codata.Musical.M.html#737" class="Bound">p₁</a> <a id="740" href="Codata.Musical.M.html#740" class="Bound">p₂</a><a id="742" class="Symbol">}</a> <a id="744" class="Symbol">{</a><a id="745" href="Codata.Musical.M.html#745" class="Bound">C₁</a> <a id="748" class="Symbol">:</a> <a id="750" href="Data.Container.Core.html#415" class="Record">Container</a> <a id="760" href="Codata.Musical.M.html#731" class="Bound">s₁</a> <a id="763" href="Codata.Musical.M.html#737" class="Bound">p₁</a><a id="765" class="Symbol">}</a> <a id="767" class="Symbol">{</a><a id="768" href="Codata.Musical.M.html#768" class="Bound">C₂</a> <a id="771" class="Symbol">:</a> <a id="773" href="Data.Container.Core.html#415" class="Record">Container</a> <a id="783" href="Codata.Musical.M.html#734" class="Bound">s₂</a> <a id="786" href="Codata.Musical.M.html#740" class="Bound">p₂</a><a id="788" class="Symbol">}</a>
         <a id="799" class="Symbol">(</a><a id="800" href="Codata.Musical.M.html#800" class="Bound">m</a> <a id="802" class="Symbol">:</a> <a id="804" href="Codata.Musical.M.html#745" class="Bound">C₁</a> <a id="807" href="Data.Container.Core.html#749" class="Record Operator">⇒</a> <a id="809" href="Codata.Musical.M.html#768" class="Bound">C₂</a><a id="811" class="Symbol">)</a> <a id="813" class="Keyword">where</a>

  <a id="822" href="Codata.Musical.M.html#822" class="Function">map</a> <a id="826" class="Symbol">:</a> <a id="828" href="Codata.Musical.M.html#430" class="Datatype">M</a> <a id="830" href="Codata.Musical.M.html#745" class="Bound">C₁</a> <a id="833" class="Symbol">→</a> <a id="835" href="Codata.Musical.M.html#430" class="Datatype">M</a> <a id="837" href="Codata.Musical.M.html#768" class="Bound">C₂</a>
  <a id="842" href="Codata.Musical.M.html#822" class="Function">map</a> <a id="846" class="Symbol">(</a><a id="847" href="Codata.Musical.M.html#480" class="InductiveConstructor">inf</a> <a id="851" class="Symbol">(</a><a id="852" href="Codata.Musical.M.html#852" class="Bound">x</a> <a id="854" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="856" href="Codata.Musical.M.html#856" class="Bound">f</a><a id="857" class="Symbol">))</a> <a id="860" class="Symbol">=</a> <a id="862" href="Codata.Musical.M.html#480" class="InductiveConstructor">inf</a> <a id="866" class="Symbol">(</a><a id="867" href="Data.Container.Core.html#886" class="Field">shape</a> <a id="873" href="Codata.Musical.M.html#800" class="Bound">m</a> <a id="875" href="Codata.Musical.M.html#852" class="Bound">x</a> <a id="877" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="879" class="Symbol">λ</a> <a id="881" href="Codata.Musical.M.html#881" class="Bound">p</a> <a id="883" class="Symbol">→</a> <a id="885" href="Agda.Builtin.Coinduction.html#129" class="CoinductiveConstructor Operator">♯</a> <a id="887" href="Codata.Musical.M.html#822" class="Function">map</a> <a id="891" class="Symbol">(</a><a id="892" href="Agda.Builtin.Coinduction.html#164" class="Field">♭</a> <a id="894" class="Symbol">(</a><a id="895" href="Codata.Musical.M.html#856" class="Bound">f</a> <a id="897" class="Symbol">(</a><a id="898" href="Data.Container.Core.html#921" class="Field">position</a> <a id="907" href="Codata.Musical.M.html#800" class="Bound">m</a> <a id="909" href="Codata.Musical.M.html#881" class="Bound">p</a><a id="910" class="Symbol">))))</a>


<a id="917" class="Comment">-- unfold</a>

<a id="928" class="Keyword">module</a> <a id="935" href="Codata.Musical.M.html#935" class="Module">_</a> <a id="937" class="Symbol">{</a><a id="938" href="Codata.Musical.M.html#938" class="Bound">s</a> <a id="940" href="Codata.Musical.M.html#940" class="Bound">p</a> <a id="942" href="Codata.Musical.M.html#942" class="Bound">ℓ</a><a id="943" class="Symbol">}</a> <a id="945" class="Symbol">{</a><a id="946" href="Codata.Musical.M.html#946" class="Bound">C</a> <a id="948" class="Symbol">:</a> <a id="950" href="Data.Container.Core.html#415" class="Record">Container</a> <a id="960" href="Codata.Musical.M.html#938" class="Bound">s</a> <a id="962" href="Codata.Musical.M.html#940" class="Bound">p</a><a id="963" class="Symbol">}</a> <a id="965" class="Symbol">(</a><a id="966" class="Keyword">open</a> <a id="971" href="Data.Container.Core.html#415" class="Module">Container</a> <a id="981" href="Codata.Musical.M.html#946" class="Bound">C</a><a id="982" class="Symbol">)</a>
         <a id="993" class="Symbol">{</a><a id="994" href="Codata.Musical.M.html#994" class="Bound">S</a> <a id="996" class="Symbol">:</a> <a id="998" class="PrimitiveType">Set</a> <a id="1002" href="Codata.Musical.M.html#942" class="Bound">ℓ</a><a id="1003" class="Symbol">}</a> <a id="1005" class="Symbol">(</a><a id="1006" href="Codata.Musical.M.html#1006" class="Bound">alg</a> <a id="1010" class="Symbol">:</a> <a id="1012" href="Codata.Musical.M.html#994" class="Bound">S</a> <a id="1014" class="Symbol">→</a> <a id="1016" href="Data.Container.Core.html#605" class="Function Operator">⟦</a> <a id="1018" href="Codata.Musical.M.html#946" class="Bound">C</a> <a id="1020" href="Data.Container.Core.html#605" class="Function Operator">⟧</a> <a id="1022" href="Codata.Musical.M.html#994" class="Bound">S</a><a id="1023" class="Symbol">)</a> <a id="1025" class="Keyword">where</a>

  <a id="1034" href="Codata.Musical.M.html#1034" class="Function">unfold</a> <a id="1041" class="Symbol">:</a> <a id="1043" href="Codata.Musical.M.html#994" class="Bound">S</a> <a id="1045" class="Symbol">→</a> <a id="1047" href="Codata.Musical.M.html#430" class="Datatype">M</a> <a id="1049" href="Codata.Musical.M.html#946" class="Bound">C</a>
  <a id="1053" href="Codata.Musical.M.html#1034" class="Function">unfold</a> <a id="1060" href="Codata.Musical.M.html#1060" class="Bound">seed</a> <a id="1065" class="Symbol">=</a> <a id="1067" class="Keyword">let</a> <a id="1071" class="Symbol">(</a><a id="1072" href="Codata.Musical.M.html#1072" class="Bound">x</a> <a id="1074" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1076" href="Codata.Musical.M.html#1076" class="Bound">f</a><a id="1077" class="Symbol">)</a> <a id="1079" class="Symbol">=</a> <a id="1081" href="Codata.Musical.M.html#1006" class="Bound">alg</a> <a id="1085" href="Codata.Musical.M.html#1060" class="Bound">seed</a> <a id="1090" class="Keyword">in</a>
                <a id="1109" href="Codata.Musical.M.html#480" class="InductiveConstructor">inf</a> <a id="1113" class="Symbol">(</a><a id="1114" href="Codata.Musical.M.html#1072" class="Bound">x</a> <a id="1116" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1118" class="Symbol">λ</a> <a id="1120" href="Codata.Musical.M.html#1120" class="Bound">p</a> <a id="1122" class="Symbol">→</a> <a id="1124" href="Agda.Builtin.Coinduction.html#129" class="CoinductiveConstructor Operator">♯</a> <a id="1126" href="Codata.Musical.M.html#1034" class="Function">unfold</a> <a id="1133" class="Symbol">(</a><a id="1134" href="Codata.Musical.M.html#1076" class="Bound">f</a> <a id="1136" href="Codata.Musical.M.html#1120" class="Bound">p</a><a id="1137" class="Symbol">))</a>
</pre></body></html>