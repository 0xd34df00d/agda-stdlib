<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Function.Related.TypeIsomorphisms.Solver</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Automatic solver for equations over product and sum types</a>
<a id="167" class="Comment">--</a>
<a id="170" class="Comment">-- See examples at the bottom of the file for how to use this solver</a>
<a id="239" class="Comment">------------------------------------------------------------------------</a>

<a id="313" class="Symbol">{-#</a> <a id="317" class="Keyword">OPTIONS</a> <a id="325" class="Option">--without-K</a> <a id="337" class="Symbol">#-}</a>

<a id="342" class="Keyword">module</a> <a id="349" href="Function.Related.TypeIsomorphisms.Solver.html" class="Module">Function.Related.TypeIsomorphisms.Solver</a> <a id="390" class="Keyword">where</a>

<a id="397" class="Keyword">open</a> <a id="402" class="Keyword">import</a> <a id="409" href="Algebra.html" class="Module">Algebra</a> <a id="417" class="Keyword">using</a> <a id="423" class="Symbol">(</a><a id="424" href="Algebra.html#10865" class="Record">CommutativeSemiring</a><a id="443" class="Symbol">)</a>
<a id="445" class="Keyword">import</a> <a id="452" href="Algebra.Solver.Ring.NaturalCoefficients.Default.html" class="Module">Algebra.Solver.Ring.NaturalCoefficients.Default</a>
<a id="500" class="Keyword">open</a> <a id="505" class="Keyword">import</a> <a id="512" href="Data.Empty.html" class="Module">Data.Empty</a> <a id="523" class="Keyword">using</a> <a id="529" class="Symbol">(</a><a id="530" href="Data.Empty.html#272" class="Datatype">⊥</a><a id="531" class="Symbol">)</a>
<a id="533" class="Keyword">open</a> <a id="538" class="Keyword">import</a> <a id="545" href="Data.Product.html" class="Module">Data.Product</a> <a id="558" class="Keyword">using</a> <a id="564" class="Symbol">(</a><a id="565" href="Data.Product.html#1382" class="Function Operator">_×_</a><a id="568" class="Symbol">)</a>
<a id="570" class="Keyword">open</a> <a id="575" class="Keyword">import</a> <a id="582" href="Data.Sum.html" class="Module">Data.Sum</a> <a id="591" class="Keyword">using</a> <a id="597" class="Symbol">(</a><a id="598" href="Data.Sum.Base.html#502" class="Datatype Operator">_⊎_</a><a id="601" class="Symbol">)</a>
<a id="603" class="Keyword">open</a> <a id="608" class="Keyword">import</a> <a id="615" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="625" class="Keyword">using</a> <a id="631" class="Symbol">(</a><a id="632" href="Agda.Builtin.Unit.html#69" class="Record">⊤</a><a id="633" class="Symbol">)</a>
<a id="635" class="Keyword">open</a> <a id="640" class="Keyword">import</a> <a id="647" href="Level.html" class="Module">Level</a> <a id="653" class="Keyword">using</a> <a id="659" class="Symbol">(</a><a id="660" href="Agda.Primitive.html#408" class="Postulate">Level</a><a id="665" class="Symbol">;</a> <a id="667" href="Level.html#387" class="Record">Lift</a><a id="671" class="Symbol">)</a>
<a id="673" class="Keyword">open</a> <a id="678" class="Keyword">import</a> <a id="685" href="Function.Inverse.html" class="Module">Function.Inverse</a> <a id="702" class="Symbol">as</a> <a id="705" class="Module">Inv</a> <a id="709" class="Keyword">using</a> <a id="715" class="Symbol">(</a><a id="716" href="Function.Inverse.html#2222" class="Function Operator">_↔_</a><a id="719" class="Symbol">)</a>
<a id="721" class="Keyword">open</a> <a id="726" class="Keyword">import</a> <a id="733" href="Function.Related.html" class="Module">Function.Related</a> <a id="750" class="Symbol">as</a> <a id="753" class="Module">Related</a>
<a id="761" class="Keyword">open</a> <a id="766" class="Keyword">import</a> <a id="773" href="Function.Related.TypeIsomorphisms.html" class="Module">Function.Related.TypeIsomorphisms</a>

<a id="808" class="Comment">------------------------------------------------------------------------</a>
<a id="881" class="Comment">-- The solver</a>

<a id="896" class="Keyword">module</a> <a id="×-⊎-Solver"></a><a id="903" href="Function.Related.TypeIsomorphisms.Solver.html#903" class="Module">×-⊎-Solver</a> <a id="914" class="Symbol">(</a><a id="915" href="Function.Related.TypeIsomorphisms.Solver.html#915" class="Bound">k</a> <a id="917" class="Symbol">:</a> <a id="919" href="Function.Related.html#3465" class="Datatype">Symmetric-kind</a><a id="933" class="Symbol">)</a> <a id="935" class="Symbol">{</a><a id="936" href="Function.Related.TypeIsomorphisms.Solver.html#936" class="Bound">ℓ</a><a id="937" class="Symbol">}</a> <a id="939" class="Symbol">=</a>
  <a id="943" href="Algebra.Solver.Ring.NaturalCoefficients.Default.html" class="Module">Algebra.Solver.Ring.NaturalCoefficients.Default</a>
    <a id="995" class="Symbol">(</a><a id="996" href="Function.Related.TypeIsomorphisms.html#7517" class="Function">×-⊎-commutativeSemiring</a> <a id="1020" href="Function.Related.TypeIsomorphisms.Solver.html#915" class="Bound">k</a> <a id="1022" href="Function.Related.TypeIsomorphisms.Solver.html#936" class="Bound">ℓ</a><a id="1023" class="Symbol">)</a>

<a id="1026" class="Comment">------------------------------------------------------------------------</a>
<a id="1099" class="Comment">-- Tests</a>

<a id="1109" class="Keyword">private</a>

  <a id="1120" class="Comment">-- A test of the solver above.</a>

  <a id="test"></a><a id="1154" href="Function.Related.TypeIsomorphisms.Solver.html#1154" class="Function">test</a> <a id="1159" class="Symbol">:</a> <a id="1161" class="Symbol">{</a><a id="1162" href="Function.Related.TypeIsomorphisms.Solver.html#1162" class="Bound">ℓ</a> <a id="1164" class="Symbol">:</a> <a id="1166" href="Agda.Primitive.html#408" class="Postulate">Level</a><a id="1171" class="Symbol">}</a> <a id="1173" class="Symbol">(</a><a id="1174" href="Function.Related.TypeIsomorphisms.Solver.html#1174" class="Bound">A</a> <a id="1176" href="Function.Related.TypeIsomorphisms.Solver.html#1176" class="Bound">B</a> <a id="1178" href="Function.Related.TypeIsomorphisms.Solver.html#1178" class="Bound">C</a> <a id="1180" class="Symbol">:</a> <a id="1182" class="PrimitiveType">Set</a> <a id="1186" href="Function.Related.TypeIsomorphisms.Solver.html#1162" class="Bound">ℓ</a><a id="1187" class="Symbol">)</a> <a id="1189" class="Symbol">→</a>
         <a id="1200" class="Symbol">(</a><a id="1201" href="Level.html#387" class="Record">Lift</a> <a id="1206" href="Function.Related.TypeIsomorphisms.Solver.html#1162" class="Bound">ℓ</a> <a id="1208" href="Agda.Builtin.Unit.html#69" class="Record">⊤</a> <a id="1210" href="Data.Product.html#1382" class="Function Operator">×</a> <a id="1212" href="Function.Related.TypeIsomorphisms.Solver.html#1174" class="Bound">A</a> <a id="1214" href="Data.Product.html#1382" class="Function Operator">×</a> <a id="1216" class="Symbol">(</a><a id="1217" href="Function.Related.TypeIsomorphisms.Solver.html#1176" class="Bound">B</a> <a id="1219" href="Data.Sum.Base.html#502" class="Datatype Operator">⊎</a> <a id="1221" href="Function.Related.TypeIsomorphisms.Solver.html#1178" class="Bound">C</a><a id="1222" class="Symbol">))</a> <a id="1225" href="Function.Inverse.html#2222" class="Function Operator">↔</a> <a id="1227" class="Symbol">(</a><a id="1228" href="Function.Related.TypeIsomorphisms.Solver.html#1174" class="Bound">A</a> <a id="1230" href="Data.Product.html#1382" class="Function Operator">×</a> <a id="1232" href="Function.Related.TypeIsomorphisms.Solver.html#1176" class="Bound">B</a> <a id="1234" href="Data.Sum.Base.html#502" class="Datatype Operator">⊎</a> <a id="1236" href="Function.Related.TypeIsomorphisms.Solver.html#1178" class="Bound">C</a> <a id="1238" href="Data.Product.html#1382" class="Function Operator">×</a> <a id="1240" class="Symbol">(</a><a id="1241" href="Level.html#387" class="Record">Lift</a> <a id="1246" href="Function.Related.TypeIsomorphisms.Solver.html#1162" class="Bound">ℓ</a> <a id="1248" href="Data.Empty.html#272" class="Datatype">⊥</a> <a id="1250" href="Data.Sum.Base.html#502" class="Datatype Operator">⊎</a> <a id="1252" href="Function.Related.TypeIsomorphisms.Solver.html#1174" class="Bound">A</a><a id="1253" class="Symbol">))</a>
  <a id="1258" href="Function.Related.TypeIsomorphisms.Solver.html#1154" class="Function">test</a> <a id="1263" class="Symbol">=</a> <a id="1265" href="Relation.Binary.Reflection.html#2411" class="Function">solve</a> <a id="1271" class="Number">3</a> <a id="1273" class="Symbol">(λ</a> <a id="1276" href="Function.Related.TypeIsomorphisms.Solver.html#1276" class="Bound">A</a> <a id="1278" href="Function.Related.TypeIsomorphisms.Solver.html#1278" class="Bound">B</a> <a id="1280" href="Function.Related.TypeIsomorphisms.Solver.html#1280" class="Bound">C</a> <a id="1282" class="Symbol">→</a> <a id="1284" href="Algebra.Solver.Ring.html#2515" class="InductiveConstructor">con</a> <a id="1288" class="Number">1</a> <a id="1290" href="Algebra.Solver.Ring.html#2782" class="Function Operator">:*</a> <a id="1293" class="Symbol">(</a><a id="1294" href="Function.Related.TypeIsomorphisms.Solver.html#1276" class="Bound">A</a> <a id="1296" href="Algebra.Solver.Ring.html#2782" class="Function Operator">:*</a> <a id="1299" class="Symbol">(</a><a id="1300" href="Function.Related.TypeIsomorphisms.Solver.html#1278" class="Bound">B</a> <a id="1302" href="Algebra.Solver.Ring.html#2709" class="Function Operator">:+</a> <a id="1305" href="Function.Related.TypeIsomorphisms.Solver.html#1280" class="Bound">C</a><a id="1306" class="Symbol">))</a> <a id="1309" href="Relation.Binary.Reflection.html#3520" class="Function Operator">:=</a>
                            <a id="1340" href="Function.Related.TypeIsomorphisms.Solver.html#1276" class="Bound">A</a> <a id="1342" href="Algebra.Solver.Ring.html#2782" class="Function Operator">:*</a> <a id="1345" href="Function.Related.TypeIsomorphisms.Solver.html#1278" class="Bound">B</a> <a id="1347" href="Algebra.Solver.Ring.html#2709" class="Function Operator">:+</a> <a id="1350" href="Function.Related.TypeIsomorphisms.Solver.html#1280" class="Bound">C</a> <a id="1352" href="Algebra.Solver.Ring.html#2782" class="Function Operator">:*</a> <a id="1355" class="Symbol">(</a><a id="1356" href="Algebra.Solver.Ring.html#2515" class="InductiveConstructor">con</a> <a id="1360" class="Number">0</a> <a id="1362" href="Algebra.Solver.Ring.html#2709" class="Function Operator">:+</a> <a id="1365" href="Function.Related.TypeIsomorphisms.Solver.html#1276" class="Bound">A</a><a id="1366" class="Symbol">))</a>
                 <a id="1386" href="Function.Inverse.html#3427" class="Function">Inv.id</a>
    <a id="1397" class="Keyword">where</a> <a id="1403" class="Keyword">open</a> <a id="1408" href="Function.Related.TypeIsomorphisms.Solver.html#903" class="Module">×-⊎-Solver</a> <a id="1419" href="Function.Related.html#3525" class="InductiveConstructor">bijection</a>
</pre></body></html>