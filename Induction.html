<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Induction</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- An abstraction of various forms of recursion/induction</a>
<a id="164" class="Comment">------------------------------------------------------------------------</a>

<a id="238" class="Comment">-- The idea underlying Induction.* comes from Epigram 1, see Section 4</a>
<a id="309" class="Comment">-- of &quot;The view from the left&quot; by McBride and McKinna.</a>

<a id="365" class="Comment">-- Note: The types in this module can perhaps be easier to understand</a>
<a id="435" class="Comment">-- if they are normalised. Note also that Agda can do the</a>
<a id="493" class="Comment">-- normalisation for you.</a>

<a id="520" class="Symbol">{-#</a> <a id="524" class="Keyword">OPTIONS</a> <a id="532" class="Option">--without-K</a> <a id="544" class="Symbol">#-}</a>

<a id="549" class="Keyword">module</a> <a id="556" href="Induction.html" class="Module">Induction</a> <a id="566" class="Keyword">where</a>

<a id="573" class="Keyword">open</a> <a id="578" class="Keyword">import</a> <a id="585" href="Level.html" class="Module">Level</a>
<a id="591" class="Keyword">open</a> <a id="596" class="Keyword">import</a> <a id="603" href="Relation.Unary.html" class="Module">Relation.Unary</a>

<a id="619" class="Comment">-- A RecStruct describes the allowed structure of recursion. The</a>
<a id="684" class="Comment">-- examples in Induction.Nat should explain what this is all about.</a>

<a id="RecStruct"></a><a id="753" href="Induction.html#753" class="Function">RecStruct</a> <a id="763" class="Symbol">:</a> <a id="765" class="Symbol">∀</a> <a id="767" class="Symbol">{</a><a id="768" href="Induction.html#768" class="Bound">a</a><a id="769" class="Symbol">}</a> <a id="771" class="Symbol">→</a> <a id="773" class="PrimitiveType">Set</a> <a id="777" href="Induction.html#768" class="Bound">a</a> <a id="779" class="Symbol">→</a> <a id="781" class="Symbol">(</a><a id="782" href="Induction.html#782" class="Bound">ℓ₁</a> <a id="785" href="Induction.html#785" class="Bound">ℓ₂</a> <a id="788" class="Symbol">:</a> <a id="790" href="Agda.Primitive.html#408" class="Postulate">Level</a><a id="795" class="Symbol">)</a> <a id="797" class="Symbol">→</a> <a id="799" class="PrimitiveType">Set</a> <a id="803" class="Symbol">_</a>
<a id="805" href="Induction.html#753" class="Function">RecStruct</a> <a id="815" href="Induction.html#815" class="Bound">A</a> <a id="817" href="Induction.html#817" class="Bound">ℓ₁</a> <a id="820" href="Induction.html#820" class="Bound">ℓ₂</a> <a id="823" class="Symbol">=</a> <a id="825" href="Relation.Unary.html#611" class="Function">Pred</a> <a id="830" href="Induction.html#815" class="Bound">A</a> <a id="832" href="Induction.html#817" class="Bound">ℓ₁</a> <a id="835" class="Symbol">→</a> <a id="837" href="Relation.Unary.html#611" class="Function">Pred</a> <a id="842" href="Induction.html#815" class="Bound">A</a> <a id="844" href="Induction.html#820" class="Bound">ℓ₂</a>

<a id="848" class="Comment">-- A recursor builder constructs an instance of a recursion structure</a>
<a id="918" class="Comment">-- for a given input.</a>

<a id="RecursorBuilder"></a><a id="941" href="Induction.html#941" class="Function">RecursorBuilder</a> <a id="957" class="Symbol">:</a> <a id="959" class="Symbol">∀</a> <a id="961" class="Symbol">{</a><a id="962" href="Induction.html#962" class="Bound">a</a> <a id="964" href="Induction.html#964" class="Bound">ℓ₁</a> <a id="967" href="Induction.html#967" class="Bound">ℓ₂</a><a id="969" class="Symbol">}</a> <a id="971" class="Symbol">{</a><a id="972" href="Induction.html#972" class="Bound">A</a> <a id="974" class="Symbol">:</a> <a id="976" class="PrimitiveType">Set</a> <a id="980" href="Induction.html#962" class="Bound">a</a><a id="981" class="Symbol">}</a> <a id="983" class="Symbol">→</a> <a id="985" href="Induction.html#753" class="Function">RecStruct</a> <a id="995" href="Induction.html#972" class="Bound">A</a> <a id="997" href="Induction.html#964" class="Bound">ℓ₁</a> <a id="1000" href="Induction.html#967" class="Bound">ℓ₂</a> <a id="1003" class="Symbol">→</a> <a id="1005" class="PrimitiveType">Set</a> <a id="1009" class="Symbol">_</a>
<a id="1011" href="Induction.html#941" class="Function">RecursorBuilder</a> <a id="1027" href="Induction.html#1027" class="Bound">Rec</a> <a id="1031" class="Symbol">=</a> <a id="1033" class="Symbol">∀</a> <a id="1035" href="Induction.html#1035" class="Bound">P</a> <a id="1037" class="Symbol">→</a> <a id="1039" href="Induction.html#1027" class="Bound">Rec</a> <a id="1043" href="Induction.html#1035" class="Bound">P</a> <a id="1045" href="Relation.Unary.html#2205" class="Function Operator">⊆′</a> <a id="1048" href="Induction.html#1035" class="Bound">P</a> <a id="1050" class="Symbol">→</a> <a id="1052" href="Relation.Unary.html#3120" class="Function">Universal</a> <a id="1062" class="Symbol">(</a><a id="1063" href="Induction.html#1027" class="Bound">Rec</a> <a id="1067" href="Induction.html#1035" class="Bound">P</a><a id="1068" class="Symbol">)</a>

<a id="1071" class="Comment">-- A recursor can be used to actually compute/prove something useful.</a>

<a id="Recursor"></a><a id="1142" href="Induction.html#1142" class="Function">Recursor</a> <a id="1151" class="Symbol">:</a> <a id="1153" class="Symbol">∀</a> <a id="1155" class="Symbol">{</a><a id="1156" href="Induction.html#1156" class="Bound">a</a> <a id="1158" href="Induction.html#1158" class="Bound">ℓ₁</a> <a id="1161" href="Induction.html#1161" class="Bound">ℓ₂</a><a id="1163" class="Symbol">}</a> <a id="1165" class="Symbol">{</a><a id="1166" href="Induction.html#1166" class="Bound">A</a> <a id="1168" class="Symbol">:</a> <a id="1170" class="PrimitiveType">Set</a> <a id="1174" href="Induction.html#1156" class="Bound">a</a><a id="1175" class="Symbol">}</a> <a id="1177" class="Symbol">→</a> <a id="1179" href="Induction.html#753" class="Function">RecStruct</a> <a id="1189" href="Induction.html#1166" class="Bound">A</a> <a id="1191" href="Induction.html#1158" class="Bound">ℓ₁</a> <a id="1194" href="Induction.html#1161" class="Bound">ℓ₂</a> <a id="1197" class="Symbol">→</a> <a id="1199" class="PrimitiveType">Set</a> <a id="1203" class="Symbol">_</a>
<a id="1205" href="Induction.html#1142" class="Function">Recursor</a> <a id="1214" href="Induction.html#1214" class="Bound">Rec</a> <a id="1218" class="Symbol">=</a> <a id="1220" class="Symbol">∀</a> <a id="1222" href="Induction.html#1222" class="Bound">P</a> <a id="1224" class="Symbol">→</a> <a id="1226" href="Induction.html#1214" class="Bound">Rec</a> <a id="1230" href="Induction.html#1222" class="Bound">P</a> <a id="1232" href="Relation.Unary.html#2205" class="Function Operator">⊆′</a> <a id="1235" href="Induction.html#1222" class="Bound">P</a> <a id="1237" class="Symbol">→</a> <a id="1239" href="Relation.Unary.html#3120" class="Function">Universal</a> <a id="1249" href="Induction.html#1222" class="Bound">P</a>

<a id="1252" class="Comment">-- And recursors can be constructed from recursor builders.</a>

<a id="build"></a><a id="1313" href="Induction.html#1313" class="Function">build</a> <a id="1319" class="Symbol">:</a> <a id="1321" class="Symbol">∀</a> <a id="1323" class="Symbol">{</a><a id="1324" href="Induction.html#1324" class="Bound">a</a> <a id="1326" href="Induction.html#1326" class="Bound">ℓ₁</a> <a id="1329" href="Induction.html#1329" class="Bound">ℓ₂</a><a id="1331" class="Symbol">}</a> <a id="1333" class="Symbol">{</a><a id="1334" href="Induction.html#1334" class="Bound">A</a> <a id="1336" class="Symbol">:</a> <a id="1338" class="PrimitiveType">Set</a> <a id="1342" href="Induction.html#1324" class="Bound">a</a><a id="1343" class="Symbol">}</a> <a id="1345" class="Symbol">{</a><a id="1346" href="Induction.html#1346" class="Bound">Rec</a> <a id="1350" class="Symbol">:</a> <a id="1352" href="Induction.html#753" class="Function">RecStruct</a> <a id="1362" href="Induction.html#1334" class="Bound">A</a> <a id="1364" href="Induction.html#1326" class="Bound">ℓ₁</a> <a id="1367" href="Induction.html#1329" class="Bound">ℓ₂</a><a id="1369" class="Symbol">}</a> <a id="1371" class="Symbol">→</a>
        <a id="1381" href="Induction.html#941" class="Function">RecursorBuilder</a> <a id="1397" href="Induction.html#1346" class="Bound">Rec</a> <a id="1401" class="Symbol">→</a>
        <a id="1411" href="Induction.html#1142" class="Function">Recursor</a> <a id="1420" href="Induction.html#1346" class="Bound">Rec</a>
<a id="1424" href="Induction.html#1313" class="Function">build</a> <a id="1430" href="Induction.html#1430" class="Bound">builder</a> <a id="1438" href="Induction.html#1438" class="Bound">P</a> <a id="1440" href="Induction.html#1440" class="Bound">f</a> <a id="1442" href="Induction.html#1442" class="Bound">x</a> <a id="1444" class="Symbol">=</a> <a id="1446" href="Induction.html#1440" class="Bound">f</a> <a id="1448" href="Induction.html#1442" class="Bound">x</a> <a id="1450" class="Symbol">(</a><a id="1451" href="Induction.html#1430" class="Bound">builder</a> <a id="1459" href="Induction.html#1438" class="Bound">P</a> <a id="1461" href="Induction.html#1440" class="Bound">f</a> <a id="1463" href="Induction.html#1442" class="Bound">x</a><a id="1464" class="Symbol">)</a>

<a id="1467" class="Comment">-- We can repeat the exercise above for subsets of the type we are</a>
<a id="1534" class="Comment">-- recursing over.</a>

<a id="SubsetRecursorBuilder"></a><a id="1554" href="Induction.html#1554" class="Function">SubsetRecursorBuilder</a> <a id="1576" class="Symbol">:</a> <a id="1578" class="Symbol">∀</a> <a id="1580" class="Symbol">{</a><a id="1581" href="Induction.html#1581" class="Bound">a</a> <a id="1583" href="Induction.html#1583" class="Bound">ℓ₁</a> <a id="1586" href="Induction.html#1586" class="Bound">ℓ₂</a> <a id="1589" href="Induction.html#1589" class="Bound">ℓ₃</a><a id="1591" class="Symbol">}</a> <a id="1593" class="Symbol">{</a><a id="1594" href="Induction.html#1594" class="Bound">A</a> <a id="1596" class="Symbol">:</a> <a id="1598" class="PrimitiveType">Set</a> <a id="1602" href="Induction.html#1581" class="Bound">a</a><a id="1603" class="Symbol">}</a> <a id="1605" class="Symbol">→</a>
                        <a id="1631" href="Relation.Unary.html#611" class="Function">Pred</a> <a id="1636" href="Induction.html#1594" class="Bound">A</a> <a id="1638" href="Induction.html#1583" class="Bound">ℓ₁</a> <a id="1641" class="Symbol">→</a> <a id="1643" href="Induction.html#753" class="Function">RecStruct</a> <a id="1653" href="Induction.html#1594" class="Bound">A</a> <a id="1655" href="Induction.html#1586" class="Bound">ℓ₂</a> <a id="1658" href="Induction.html#1589" class="Bound">ℓ₃</a> <a id="1661" class="Symbol">→</a> <a id="1663" class="PrimitiveType">Set</a> <a id="1667" class="Symbol">_</a>
<a id="1669" href="Induction.html#1554" class="Function">SubsetRecursorBuilder</a> <a id="1691" href="Induction.html#1691" class="Bound">Q</a> <a id="1693" href="Induction.html#1693" class="Bound">Rec</a> <a id="1697" class="Symbol">=</a> <a id="1699" class="Symbol">∀</a> <a id="1701" href="Induction.html#1701" class="Bound">P</a> <a id="1703" class="Symbol">→</a> <a id="1705" href="Induction.html#1693" class="Bound">Rec</a> <a id="1709" href="Induction.html#1701" class="Bound">P</a> <a id="1711" href="Relation.Unary.html#2205" class="Function Operator">⊆′</a> <a id="1714" href="Induction.html#1701" class="Bound">P</a> <a id="1716" class="Symbol">→</a> <a id="1718" href="Induction.html#1691" class="Bound">Q</a> <a id="1720" href="Relation.Unary.html#2205" class="Function Operator">⊆′</a> <a id="1723" href="Induction.html#1693" class="Bound">Rec</a> <a id="1727" href="Induction.html#1701" class="Bound">P</a>

<a id="SubsetRecursor"></a><a id="1730" href="Induction.html#1730" class="Function">SubsetRecursor</a> <a id="1745" class="Symbol">:</a> <a id="1747" class="Symbol">∀</a> <a id="1749" class="Symbol">{</a><a id="1750" href="Induction.html#1750" class="Bound">a</a> <a id="1752" href="Induction.html#1752" class="Bound">ℓ₁</a> <a id="1755" href="Induction.html#1755" class="Bound">ℓ₂</a> <a id="1758" href="Induction.html#1758" class="Bound">ℓ₃</a><a id="1760" class="Symbol">}</a> <a id="1762" class="Symbol">{</a><a id="1763" href="Induction.html#1763" class="Bound">A</a> <a id="1765" class="Symbol">:</a> <a id="1767" class="PrimitiveType">Set</a> <a id="1771" href="Induction.html#1750" class="Bound">a</a><a id="1772" class="Symbol">}</a> <a id="1774" class="Symbol">→</a>
                 <a id="1793" href="Relation.Unary.html#611" class="Function">Pred</a> <a id="1798" href="Induction.html#1763" class="Bound">A</a> <a id="1800" href="Induction.html#1752" class="Bound">ℓ₁</a> <a id="1803" class="Symbol">→</a> <a id="1805" href="Induction.html#753" class="Function">RecStruct</a> <a id="1815" href="Induction.html#1763" class="Bound">A</a> <a id="1817" href="Induction.html#1755" class="Bound">ℓ₂</a> <a id="1820" href="Induction.html#1758" class="Bound">ℓ₃</a> <a id="1823" class="Symbol">→</a> <a id="1825" class="PrimitiveType">Set</a> <a id="1829" class="Symbol">_</a>
<a id="1831" href="Induction.html#1730" class="Function">SubsetRecursor</a> <a id="1846" href="Induction.html#1846" class="Bound">Q</a> <a id="1848" href="Induction.html#1848" class="Bound">Rec</a> <a id="1852" class="Symbol">=</a> <a id="1854" class="Symbol">∀</a> <a id="1856" href="Induction.html#1856" class="Bound">P</a> <a id="1858" class="Symbol">→</a> <a id="1860" href="Induction.html#1848" class="Bound">Rec</a> <a id="1864" href="Induction.html#1856" class="Bound">P</a> <a id="1866" href="Relation.Unary.html#2205" class="Function Operator">⊆′</a> <a id="1869" href="Induction.html#1856" class="Bound">P</a> <a id="1871" class="Symbol">→</a> <a id="1873" href="Induction.html#1846" class="Bound">Q</a> <a id="1875" href="Relation.Unary.html#2205" class="Function Operator">⊆′</a> <a id="1878" href="Induction.html#1856" class="Bound">P</a>

<a id="subsetBuild"></a><a id="1881" href="Induction.html#1881" class="Function">subsetBuild</a> <a id="1893" class="Symbol">:</a> <a id="1895" class="Symbol">∀</a> <a id="1897" class="Symbol">{</a><a id="1898" href="Induction.html#1898" class="Bound">a</a> <a id="1900" href="Induction.html#1900" class="Bound">ℓ₁</a> <a id="1903" href="Induction.html#1903" class="Bound">ℓ₂</a> <a id="1906" href="Induction.html#1906" class="Bound">ℓ₃</a><a id="1908" class="Symbol">}</a>
                <a id="1926" class="Symbol">{</a><a id="1927" href="Induction.html#1927" class="Bound">A</a> <a id="1929" class="Symbol">:</a> <a id="1931" class="PrimitiveType">Set</a> <a id="1935" href="Induction.html#1898" class="Bound">a</a><a id="1936" class="Symbol">}</a> <a id="1938" class="Symbol">{</a><a id="1939" href="Induction.html#1939" class="Bound">Q</a> <a id="1941" class="Symbol">:</a> <a id="1943" href="Relation.Unary.html#611" class="Function">Pred</a> <a id="1948" href="Induction.html#1927" class="Bound">A</a> <a id="1950" href="Induction.html#1900" class="Bound">ℓ₁</a><a id="1952" class="Symbol">}</a> <a id="1954" class="Symbol">{</a><a id="1955" href="Induction.html#1955" class="Bound">Rec</a> <a id="1959" class="Symbol">:</a> <a id="1961" href="Induction.html#753" class="Function">RecStruct</a> <a id="1971" href="Induction.html#1927" class="Bound">A</a> <a id="1973" href="Induction.html#1903" class="Bound">ℓ₂</a> <a id="1976" href="Induction.html#1906" class="Bound">ℓ₃</a><a id="1978" class="Symbol">}</a> <a id="1980" class="Symbol">→</a>
                <a id="1998" href="Induction.html#1554" class="Function">SubsetRecursorBuilder</a> <a id="2020" href="Induction.html#1939" class="Bound">Q</a> <a id="2022" href="Induction.html#1955" class="Bound">Rec</a> <a id="2026" class="Symbol">→</a>
                <a id="2044" href="Induction.html#1730" class="Function">SubsetRecursor</a> <a id="2059" href="Induction.html#1939" class="Bound">Q</a> <a id="2061" href="Induction.html#1955" class="Bound">Rec</a>
<a id="2065" href="Induction.html#1881" class="Function">subsetBuild</a> <a id="2077" href="Induction.html#2077" class="Bound">builder</a> <a id="2085" href="Induction.html#2085" class="Bound">P</a> <a id="2087" href="Induction.html#2087" class="Bound">f</a> <a id="2089" href="Induction.html#2089" class="Bound">x</a> <a id="2091" href="Induction.html#2091" class="Bound">q</a> <a id="2093" class="Symbol">=</a> <a id="2095" href="Induction.html#2087" class="Bound">f</a> <a id="2097" href="Induction.html#2089" class="Bound">x</a> <a id="2099" class="Symbol">(</a><a id="2100" href="Induction.html#2077" class="Bound">builder</a> <a id="2108" href="Induction.html#2085" class="Bound">P</a> <a id="2110" href="Induction.html#2087" class="Bound">f</a> <a id="2112" href="Induction.html#2089" class="Bound">x</a> <a id="2114" href="Induction.html#2091" class="Bound">q</a><a id="2115" class="Symbol">)</a>
</pre></body></html>