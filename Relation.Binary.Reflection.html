<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Relation.Binary.Reflection</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Helpers intended to ease the development of &quot;tactics&quot; which use</a>
<a id="173" class="Comment">-- proof by reflection</a>
<a id="196" class="Comment">------------------------------------------------------------------------</a>

<a id="270" class="Symbol">{-#</a> <a id="274" class="Keyword">OPTIONS</a> <a id="282" class="Option">--without-K</a> <a id="294" class="Symbol">#-}</a>

<a id="299" class="Keyword">open</a> <a id="304" class="Keyword">import</a> <a id="311" href="Data.Fin.html" class="Module">Data.Fin</a>
<a id="320" class="Keyword">open</a> <a id="325" class="Keyword">import</a> <a id="332" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="341" class="Keyword">open</a> <a id="346" class="Keyword">import</a> <a id="353" href="Data.Vec.html" class="Module">Data.Vec</a> <a id="362" class="Symbol">as</a> <a id="365" class="Module">Vec</a>
<a id="369" class="Keyword">open</a> <a id="374" class="Keyword">import</a> <a id="381" href="Function.html" class="Module">Function</a>
<a id="390" class="Keyword">open</a> <a id="395" class="Keyword">import</a> <a id="402" href="Function.Equality.html" class="Module">Function.Equality</a> <a id="420" class="Keyword">using</a> <a id="426" class="Symbol">(</a><a id="427" href="Function.Equality.html#824" class="Field Operator">_⟨$⟩_</a><a id="432" class="Symbol">)</a>
<a id="434" class="Keyword">open</a> <a id="439" class="Keyword">import</a> <a id="446" href="Function.Equivalence.html" class="Module">Function.Equivalence</a> <a id="467" class="Keyword">using</a> <a id="473" class="Symbol">(</a><a id="474" class="Keyword">module</a> <a id="481" href="Function.Equivalence.html#589" class="Module">Equivalence</a><a id="492" class="Symbol">)</a>
<a id="494" class="Keyword">open</a> <a id="499" class="Keyword">import</a> <a id="506" href="Level.html" class="Module">Level</a>
<a id="512" class="Keyword">open</a> <a id="517" class="Keyword">import</a> <a id="524" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="540" class="Keyword">import</a> <a id="547" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="585" class="Symbol">as</a> <a id="588" class="Module">P</a>

<a id="591" class="Comment">-- Think of the parameters as follows:</a>
<a id="630" class="Comment">--</a>
<a id="633" class="Comment">-- * Expr:    A representation of code.</a>
<a id="673" class="Comment">-- * var:     The Expr type should support a notion of variables.</a>
<a id="739" class="Comment">-- * ⟦_⟧:     Computes the semantics of an expression. Takes an</a>
<a id="803" class="Comment">--            environment mapping variables to something.</a>
<a id="861" class="Comment">-- * ⟦_⇓⟧:    Computes the semantics of the normal form of the</a>
<a id="924" class="Comment">--            expression.</a>
<a id="950" class="Comment">-- * correct: Normalisation preserves the semantics.</a>
<a id="1003" class="Comment">--</a>
<a id="1006" class="Comment">-- Given these parameters two &quot;tactics&quot; are returned, prove and solve.</a>
<a id="1077" class="Comment">--</a>
<a id="1080" class="Comment">-- For an example of the use of this module, see Algebra.RingSolver.</a>

<a id="1150" class="Keyword">module</a> <a id="1157" href="Relation.Binary.Reflection.html" class="Module">Relation.Binary.Reflection</a>
         <a id="1193" class="Symbol">{</a><a id="1194" href="Relation.Binary.Reflection.html#1194" class="Bound">e</a> <a id="1196" href="Relation.Binary.Reflection.html#1196" class="Bound">a</a> <a id="1198" href="Relation.Binary.Reflection.html#1198" class="Bound">s</a><a id="1199" class="Symbol">}</a>
         <a id="1210" class="Symbol">{</a><a id="1211" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="1216" class="Symbol">:</a> <a id="1218" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="1220" class="Symbol">→</a> <a id="1222" class="PrimitiveType">Set</a> <a id="1226" href="Relation.Binary.Reflection.html#1194" class="Bound">e</a><a id="1227" class="Symbol">}</a> <a id="1229" class="Symbol">{</a><a id="1230" href="Relation.Binary.Reflection.html#1230" class="Bound">A</a> <a id="1232" class="Symbol">:</a> <a id="1234" class="PrimitiveType">Set</a> <a id="1238" href="Relation.Binary.Reflection.html#1196" class="Bound">a</a><a id="1239" class="Symbol">}</a>
         <a id="1250" class="Symbol">(</a><a id="1251" href="Relation.Binary.Reflection.html#1251" class="Bound">Sem</a> <a id="1255" class="Symbol">:</a> <a id="1257" href="Relation.Binary.html#1923" class="Record">Setoid</a> <a id="1264" href="Relation.Binary.Reflection.html#1196" class="Bound">a</a> <a id="1266" href="Relation.Binary.Reflection.html#1198" class="Bound">s</a><a id="1267" class="Symbol">)</a>
         <a id="1278" class="Symbol">(</a><a id="1279" href="Relation.Binary.Reflection.html#1279" class="Bound">var</a> <a id="1283" class="Symbol">:</a> <a id="1285" class="Symbol">∀</a> <a id="1287" class="Symbol">{</a><a id="1288" href="Relation.Binary.Reflection.html#1288" class="Bound">n</a><a id="1289" class="Symbol">}</a> <a id="1291" class="Symbol">→</a> <a id="1293" href="Data.Fin.Base.html#944" class="Datatype">Fin</a> <a id="1297" href="Relation.Binary.Reflection.html#1288" class="Bound">n</a> <a id="1299" class="Symbol">→</a> <a id="1301" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="1306" href="Relation.Binary.Reflection.html#1288" class="Bound">n</a><a id="1307" class="Symbol">)</a>
         <a id="1318" class="Symbol">(</a><a id="1319" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦_⟧</a> <a id="1323" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦_⇓⟧</a> <a id="1328" class="Symbol">:</a> <a id="1330" class="Symbol">∀</a> <a id="1332" class="Symbol">{</a><a id="1333" href="Relation.Binary.Reflection.html#1333" class="Bound">n</a><a id="1334" class="Symbol">}</a> <a id="1336" class="Symbol">→</a> <a id="1338" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="1343" href="Relation.Binary.Reflection.html#1333" class="Bound">n</a> <a id="1345" class="Symbol">→</a> <a id="1347" href="Data.Vec.html#766" class="Datatype">Vec</a> <a id="1351" href="Relation.Binary.Reflection.html#1230" class="Bound">A</a> <a id="1353" href="Relation.Binary.Reflection.html#1333" class="Bound">n</a> <a id="1355" class="Symbol">→</a> <a id="1357" href="Relation.Binary.html#1986" class="Field">Setoid.Carrier</a> <a id="1372" href="Relation.Binary.Reflection.html#1251" class="Bound">Sem</a><a id="1375" class="Symbol">)</a>
         <a id="1386" class="Symbol">(</a><a id="1387" href="Relation.Binary.Reflection.html#1387" class="Bound">correct</a> <a id="1395" class="Symbol">:</a> <a id="1397" class="Symbol">∀</a> <a id="1399" class="Symbol">{</a><a id="1400" href="Relation.Binary.Reflection.html#1400" class="Bound">n</a><a id="1401" class="Symbol">}</a> <a id="1403" class="Symbol">(</a><a id="1404" href="Relation.Binary.Reflection.html#1404" class="Bound">e</a> <a id="1406" class="Symbol">:</a> <a id="1408" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="1413" href="Relation.Binary.Reflection.html#1400" class="Bound">n</a><a id="1414" class="Symbol">)</a> <a id="1416" href="Relation.Binary.Reflection.html#1416" class="Bound">ρ</a> <a id="1418" class="Symbol">→</a>
                    <a id="1440" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦</a> <a id="1442" href="Relation.Binary.Reflection.html#1404" class="Bound">e</a> <a id="1444" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⇓⟧</a> <a id="1447" href="Relation.Binary.Reflection.html#1416" class="Bound">ρ</a> <a id="1449" href="Function.html#2541" class="Function Operator">⟨</a> <a id="1451" href="Relation.Binary.html#2012" class="Field Operator">Setoid._≈_</a> <a id="1462" href="Relation.Binary.Reflection.html#1251" class="Bound">Sem</a> <a id="1466" href="Function.html#2541" class="Function Operator">⟩</a> <a id="1468" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦</a> <a id="1470" href="Relation.Binary.Reflection.html#1404" class="Bound">e</a> <a id="1472" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟧</a> <a id="1474" href="Relation.Binary.Reflection.html#1416" class="Bound">ρ</a><a id="1475" class="Symbol">)</a>
         <a id="1486" class="Keyword">where</a>

<a id="1493" class="Keyword">open</a> <a id="1498" class="Keyword">import</a> <a id="1505" href="Data.Vec.N-ary.html" class="Module">Data.Vec.N-ary</a>
<a id="1520" class="Keyword">open</a> <a id="1525" class="Keyword">import</a> <a id="1532" href="Data.Product.html" class="Module">Data.Product</a>
<a id="1545" class="Keyword">import</a> <a id="1552" href="Relation.Binary.EqReasoning.html" class="Module">Relation.Binary.EqReasoning</a> <a id="1580" class="Symbol">as</a> <a id="1583" class="Module">Eq</a>

<a id="1587" class="Keyword">open</a> <a id="1592" href="Relation.Binary.html#1923" class="Module">Setoid</a> <a id="1599" href="Relation.Binary.Reflection.html#1251" class="Bound">Sem</a>
<a id="1603" class="Keyword">open</a> <a id="1608" href="Relation.Binary.EqReasoning.html" class="Module">Eq</a> <a id="1611" href="Relation.Binary.Reflection.html#1251" class="Bound">Sem</a>

<a id="1616" class="Comment">-- If two normalised expressions are semantically equal, then their</a>
<a id="1684" class="Comment">-- non-normalised forms are also equal.</a>

<a id="prove"></a><a id="1725" href="Relation.Binary.Reflection.html#1725" class="Function">prove</a> <a id="1731" class="Symbol">:</a> <a id="1733" class="Symbol">∀</a> <a id="1735" class="Symbol">{</a><a id="1736" href="Relation.Binary.Reflection.html#1736" class="Bound">n</a><a id="1737" class="Symbol">}</a> <a id="1739" class="Symbol">(</a><a id="1740" href="Relation.Binary.Reflection.html#1740" class="Bound">ρ</a> <a id="1742" class="Symbol">:</a> <a id="1744" href="Data.Vec.html#766" class="Datatype">Vec</a> <a id="1748" href="Relation.Binary.Reflection.html#1230" class="Bound">A</a> <a id="1750" href="Relation.Binary.Reflection.html#1736" class="Bound">n</a><a id="1751" class="Symbol">)</a> <a id="1753" href="Relation.Binary.Reflection.html#1753" class="Bound">e₁</a> <a id="1756" href="Relation.Binary.Reflection.html#1756" class="Bound">e₂</a> <a id="1759" class="Symbol">→</a>
        <a id="1769" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦</a> <a id="1771" href="Relation.Binary.Reflection.html#1753" class="Bound">e₁</a> <a id="1774" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⇓⟧</a> <a id="1777" href="Relation.Binary.Reflection.html#1740" class="Bound">ρ</a> <a id="1779" href="Relation.Binary.html#2012" class="Function Operator">≈</a> <a id="1781" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦</a> <a id="1783" href="Relation.Binary.Reflection.html#1756" class="Bound">e₂</a> <a id="1786" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⇓⟧</a> <a id="1789" href="Relation.Binary.Reflection.html#1740" class="Bound">ρ</a> <a id="1791" class="Symbol">→</a>
        <a id="1801" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦</a> <a id="1803" href="Relation.Binary.Reflection.html#1753" class="Bound">e₁</a>  <a id="1807" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟧</a> <a id="1809" href="Relation.Binary.Reflection.html#1740" class="Bound">ρ</a> <a id="1811" href="Relation.Binary.html#2012" class="Function Operator">≈</a> <a id="1813" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦</a> <a id="1815" href="Relation.Binary.Reflection.html#1756" class="Bound">e₂</a>  <a id="1819" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟧</a> <a id="1821" href="Relation.Binary.Reflection.html#1740" class="Bound">ρ</a>
<a id="1823" href="Relation.Binary.Reflection.html#1725" class="Function">prove</a> <a id="1829" href="Relation.Binary.Reflection.html#1829" class="Bound">ρ</a> <a id="1831" href="Relation.Binary.Reflection.html#1831" class="Bound">e₁</a> <a id="1834" href="Relation.Binary.Reflection.html#1834" class="Bound">e₂</a> <a id="1837" href="Relation.Binary.Reflection.html#1837" class="Bound">hyp</a> <a id="1841" class="Symbol">=</a> <a id="1843" href="Relation.Binary.PreorderReasoning.html#1257" class="Function Operator">begin</a>
  <a id="1851" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦</a> <a id="1853" href="Relation.Binary.Reflection.html#1831" class="Bound">e₁</a>  <a id="1857" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟧</a> <a id="1859" href="Relation.Binary.Reflection.html#1829" class="Bound">ρ</a> <a id="1861" href="Relation.Binary.PreorderReasoning.html#1323" class="Function Operator">≈⟨</a> <a id="1864" href="Relation.Binary.Core.html#5646" class="Function">sym</a> <a id="1868" class="Symbol">(</a><a id="1869" href="Relation.Binary.Reflection.html#1387" class="Bound">correct</a> <a id="1877" href="Relation.Binary.Reflection.html#1831" class="Bound">e₁</a> <a id="1880" href="Relation.Binary.Reflection.html#1829" class="Bound">ρ</a><a id="1881" class="Symbol">)</a> <a id="1883" href="Relation.Binary.PreorderReasoning.html#1323" class="Function Operator">⟩</a>
  <a id="1887" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦</a> <a id="1889" href="Relation.Binary.Reflection.html#1831" class="Bound">e₁</a> <a id="1892" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⇓⟧</a> <a id="1895" href="Relation.Binary.Reflection.html#1829" class="Bound">ρ</a> <a id="1897" href="Relation.Binary.PreorderReasoning.html#1323" class="Function Operator">≈⟨</a> <a id="1900" href="Relation.Binary.Reflection.html#1837" class="Bound">hyp</a> <a id="1904" href="Relation.Binary.PreorderReasoning.html#1323" class="Function Operator">⟩</a>
  <a id="1908" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦</a> <a id="1910" href="Relation.Binary.Reflection.html#1834" class="Bound">e₂</a> <a id="1913" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⇓⟧</a> <a id="1916" href="Relation.Binary.Reflection.html#1829" class="Bound">ρ</a> <a id="1918" href="Relation.Binary.PreorderReasoning.html#1323" class="Function Operator">≈⟨</a> <a id="1921" href="Relation.Binary.Reflection.html#1387" class="Bound">correct</a> <a id="1929" href="Relation.Binary.Reflection.html#1834" class="Bound">e₂</a> <a id="1932" href="Relation.Binary.Reflection.html#1829" class="Bound">ρ</a> <a id="1934" href="Relation.Binary.PreorderReasoning.html#1323" class="Function Operator">⟩</a>
  <a id="1938" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦</a> <a id="1940" href="Relation.Binary.Reflection.html#1834" class="Bound">e₂</a>  <a id="1944" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟧</a> <a id="1946" href="Relation.Binary.Reflection.html#1829" class="Bound">ρ</a> <a id="1948" href="Relation.Binary.PreorderReasoning.html#1710" class="Function Operator">∎</a>

<a id="1951" class="Comment">-- Applies the function to all possible &quot;variables&quot;.</a>

<a id="close"></a><a id="2005" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2011" class="Symbol">:</a> <a id="2013" class="Symbol">∀</a> <a id="2015" class="Symbol">{</a><a id="2016" href="Relation.Binary.Reflection.html#2016" class="Bound">A</a> <a id="2018" class="Symbol">:</a> <a id="2020" class="PrimitiveType">Set</a> <a id="2024" href="Relation.Binary.Reflection.html#1194" class="Bound">e</a><a id="2025" class="Symbol">}</a> <a id="2027" href="Relation.Binary.Reflection.html#2027" class="Bound">n</a> <a id="2029" class="Symbol">→</a> <a id="2031" href="Data.Vec.N-ary.html#846" class="Function">N-ary</a> <a id="2037" href="Relation.Binary.Reflection.html#2027" class="Bound">n</a> <a id="2039" class="Symbol">(</a><a id="2040" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="2045" href="Relation.Binary.Reflection.html#2027" class="Bound">n</a><a id="2046" class="Symbol">)</a> <a id="2048" href="Relation.Binary.Reflection.html#2016" class="Bound">A</a> <a id="2050" class="Symbol">→</a> <a id="2052" href="Relation.Binary.Reflection.html#2016" class="Bound">A</a>
<a id="2054" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2060" href="Relation.Binary.Reflection.html#2060" class="Bound">n</a> <a id="2062" href="Relation.Binary.Reflection.html#2062" class="Bound">f</a> <a id="2064" class="Symbol">=</a> <a id="2066" href="Relation.Binary.Reflection.html#2062" class="Bound">f</a> <a id="2068" href="Data.Vec.N-ary.html#1216" class="Function Operator">$ⁿ</a> <a id="2071" href="Data.Vec.html#2125" class="Function">Vec.map</a> <a id="2079" href="Relation.Binary.Reflection.html#1279" class="Bound">var</a> <a id="2083" class="Symbol">(</a><a id="2084" href="Data.Vec.html#5723" class="Function">allFin</a> <a id="2091" href="Relation.Binary.Reflection.html#2060" class="Bound">n</a><a id="2092" class="Symbol">)</a>

<a id="2095" class="Comment">-- A variant of prove which should in many cases be easier to use,</a>
<a id="2162" class="Comment">-- because variables and environments are handled in a less explicit</a>
<a id="2231" class="Comment">-- way.</a>
<a id="2239" class="Comment">--</a>
<a id="2242" class="Comment">-- If the type signature of solve is a bit daunting, then it may be</a>
<a id="2310" class="Comment">-- helpful to instantiate n with a small natural number and normalise</a>
<a id="2380" class="Comment">-- the remainder of the type.</a>

<a id="solve"></a><a id="2411" href="Relation.Binary.Reflection.html#2411" class="Function">solve</a> <a id="2417" class="Symbol">:</a> <a id="2419" class="Symbol">∀</a> <a id="2421" href="Relation.Binary.Reflection.html#2421" class="Bound">n</a> <a id="2423" class="Symbol">(</a><a id="2424" href="Relation.Binary.Reflection.html#2424" class="Bound">f</a> <a id="2426" class="Symbol">:</a> <a id="2428" href="Data.Vec.N-ary.html#846" class="Function">N-ary</a> <a id="2434" href="Relation.Binary.Reflection.html#2421" class="Bound">n</a> <a id="2436" class="Symbol">(</a><a id="2437" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="2442" href="Relation.Binary.Reflection.html#2421" class="Bound">n</a><a id="2443" class="Symbol">)</a> <a id="2445" class="Symbol">(</a><a id="2446" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="2451" href="Relation.Binary.Reflection.html#2421" class="Bound">n</a> <a id="2453" href="Data.Product.html#1382" class="Function Operator">×</a> <a id="2455" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="2460" href="Relation.Binary.Reflection.html#2421" class="Bound">n</a><a id="2461" class="Symbol">))</a> <a id="2464" class="Symbol">→</a>
  <a id="2468" href="Data.Vec.N-ary.html#2281" class="Function">Eqʰ</a> <a id="2472" href="Relation.Binary.Reflection.html#2421" class="Bound">n</a> <a id="2474" href="Relation.Binary.html#2012" class="Function Operator">_≈_</a> <a id="2478" class="Symbol">(</a><a id="2479" href="Data.Vec.N-ary.html#1065" class="Function">curryⁿ</a> <a id="2486" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦</a> <a id="2488" href="Agda.Builtin.Sigma.html#155" class="Field">proj₁</a> <a id="2494" class="Symbol">(</a><a id="2495" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2501" href="Relation.Binary.Reflection.html#2421" class="Bound">n</a> <a id="2503" href="Relation.Binary.Reflection.html#2424" class="Bound">f</a><a id="2504" class="Symbol">)</a> <a id="2506" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⇓⟧</a><a id="2508" class="Symbol">)</a> <a id="2510" class="Symbol">(</a><a id="2511" href="Data.Vec.N-ary.html#1065" class="Function">curryⁿ</a> <a id="2518" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦</a> <a id="2520" href="Agda.Builtin.Sigma.html#167" class="Field">proj₂</a> <a id="2526" class="Symbol">(</a><a id="2527" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2533" href="Relation.Binary.Reflection.html#2421" class="Bound">n</a> <a id="2535" href="Relation.Binary.Reflection.html#2424" class="Bound">f</a><a id="2536" class="Symbol">)</a> <a id="2538" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⇓⟧</a><a id="2540" class="Symbol">)</a> <a id="2542" class="Symbol">→</a>
  <a id="2546" href="Data.Vec.N-ary.html#2027" class="Function">Eq</a>  <a id="2550" href="Relation.Binary.Reflection.html#2421" class="Bound">n</a> <a id="2552" href="Relation.Binary.html#2012" class="Function Operator">_≈_</a> <a id="2556" class="Symbol">(</a><a id="2557" href="Data.Vec.N-ary.html#1065" class="Function">curryⁿ</a> <a id="2564" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦</a> <a id="2566" href="Agda.Builtin.Sigma.html#155" class="Field">proj₁</a> <a id="2572" class="Symbol">(</a><a id="2573" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2579" href="Relation.Binary.Reflection.html#2421" class="Bound">n</a> <a id="2581" href="Relation.Binary.Reflection.html#2424" class="Bound">f</a><a id="2582" class="Symbol">)</a>  <a id="2585" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟧</a><a id="2586" class="Symbol">)</a> <a id="2588" class="Symbol">(</a><a id="2589" href="Data.Vec.N-ary.html#1065" class="Function">curryⁿ</a> <a id="2596" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦</a> <a id="2598" href="Agda.Builtin.Sigma.html#167" class="Field">proj₂</a> <a id="2604" class="Symbol">(</a><a id="2605" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2611" href="Relation.Binary.Reflection.html#2421" class="Bound">n</a> <a id="2613" href="Relation.Binary.Reflection.html#2424" class="Bound">f</a><a id="2614" class="Symbol">)</a>  <a id="2617" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟧</a><a id="2618" class="Symbol">)</a>
<a id="2620" href="Relation.Binary.Reflection.html#2411" class="Function">solve</a> <a id="2626" href="Relation.Binary.Reflection.html#2626" class="Bound">n</a> <a id="2628" href="Relation.Binary.Reflection.html#2628" class="Bound">f</a> <a id="2630" href="Relation.Binary.Reflection.html#2630" class="Bound">hyp</a> <a id="2634" class="Symbol">=</a>
  <a id="2638" href="Data.Vec.N-ary.html#4102" class="Function">curryⁿ-cong</a> <a id="2650" href="Relation.Binary.html#2012" class="Function Operator">_≈_</a> <a id="2654" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦</a> <a id="2656" href="Agda.Builtin.Sigma.html#155" class="Field">proj₁</a> <a id="2662" class="Symbol">(</a><a id="2663" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2669" href="Relation.Binary.Reflection.html#2626" class="Bound">n</a> <a id="2671" href="Relation.Binary.Reflection.html#2628" class="Bound">f</a><a id="2672" class="Symbol">)</a> <a id="2674" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟧</a> <a id="2676" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦</a> <a id="2678" href="Agda.Builtin.Sigma.html#167" class="Field">proj₂</a> <a id="2684" class="Symbol">(</a><a id="2685" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2691" href="Relation.Binary.Reflection.html#2626" class="Bound">n</a> <a id="2693" href="Relation.Binary.Reflection.html#2628" class="Bound">f</a><a id="2694" class="Symbol">)</a> <a id="2696" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟧</a>
    <a id="2702" class="Symbol">(λ</a> <a id="2705" href="Relation.Binary.Reflection.html#2705" class="Bound">ρ</a> <a id="2707" class="Symbol">→</a> <a id="2709" href="Relation.Binary.Reflection.html#1725" class="Function">prove</a> <a id="2715" href="Relation.Binary.Reflection.html#2705" class="Bound">ρ</a> <a id="2717" class="Symbol">(</a><a id="2718" href="Agda.Builtin.Sigma.html#155" class="Field">proj₁</a> <a id="2724" class="Symbol">(</a><a id="2725" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2731" href="Relation.Binary.Reflection.html#2626" class="Bound">n</a> <a id="2733" href="Relation.Binary.Reflection.html#2628" class="Bound">f</a><a id="2734" class="Symbol">))</a> <a id="2737" class="Symbol">(</a><a id="2738" href="Agda.Builtin.Sigma.html#167" class="Field">proj₂</a> <a id="2744" class="Symbol">(</a><a id="2745" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2751" href="Relation.Binary.Reflection.html#2626" class="Bound">n</a> <a id="2753" href="Relation.Binary.Reflection.html#2628" class="Bound">f</a><a id="2754" class="Symbol">))</a>
             <a id="2770" class="Symbol">(</a><a id="2771" href="Data.Vec.N-ary.html#4464" class="Function">curryⁿ-cong⁻¹</a> <a id="2785" href="Relation.Binary.html#2012" class="Function Operator">_≈_</a>
                <a id="2805" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦</a> <a id="2807" href="Agda.Builtin.Sigma.html#155" class="Field">proj₁</a> <a id="2813" class="Symbol">(</a><a id="2814" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2820" href="Relation.Binary.Reflection.html#2626" class="Bound">n</a> <a id="2822" href="Relation.Binary.Reflection.html#2628" class="Bound">f</a><a id="2823" class="Symbol">)</a> <a id="2825" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⇓⟧</a> <a id="2828" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦</a> <a id="2830" href="Agda.Builtin.Sigma.html#167" class="Field">proj₂</a> <a id="2836" class="Symbol">(</a><a id="2837" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="2843" href="Relation.Binary.Reflection.html#2626" class="Bound">n</a> <a id="2845" href="Relation.Binary.Reflection.html#2628" class="Bound">f</a><a id="2846" class="Symbol">)</a> <a id="2848" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⇓⟧</a>
                <a id="2867" class="Symbol">(</a><a id="2868" href="Data.Vec.N-ary.html#5771" class="Function">Eqʰ-to-Eq</a> <a id="2878" href="Relation.Binary.Reflection.html#2626" class="Bound">n</a> <a id="2880" href="Relation.Binary.html#2012" class="Function Operator">_≈_</a> <a id="2884" href="Relation.Binary.Reflection.html#2630" class="Bound">hyp</a><a id="2887" class="Symbol">)</a> <a id="2889" href="Relation.Binary.Reflection.html#2705" class="Bound">ρ</a><a id="2890" class="Symbol">))</a>

<a id="2894" class="Comment">-- A variant of solve which does not require that the normal form</a>
<a id="2960" class="Comment">-- equality is proved for an arbitrary environment.</a>

<a id="solve₁"></a><a id="3013" href="Relation.Binary.Reflection.html#3013" class="Function">solve₁</a> <a id="3020" class="Symbol">:</a> <a id="3022" class="Symbol">∀</a> <a id="3024" href="Relation.Binary.Reflection.html#3024" class="Bound">n</a> <a id="3026" class="Symbol">(</a><a id="3027" href="Relation.Binary.Reflection.html#3027" class="Bound">f</a> <a id="3029" class="Symbol">:</a> <a id="3031" href="Data.Vec.N-ary.html#846" class="Function">N-ary</a> <a id="3037" href="Relation.Binary.Reflection.html#3024" class="Bound">n</a> <a id="3039" class="Symbol">(</a><a id="3040" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="3045" href="Relation.Binary.Reflection.html#3024" class="Bound">n</a><a id="3046" class="Symbol">)</a> <a id="3048" class="Symbol">(</a><a id="3049" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="3054" href="Relation.Binary.Reflection.html#3024" class="Bound">n</a> <a id="3056" href="Data.Product.html#1382" class="Function Operator">×</a> <a id="3058" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="3063" href="Relation.Binary.Reflection.html#3024" class="Bound">n</a><a id="3064" class="Symbol">))</a> <a id="3067" class="Symbol">→</a>
         <a id="3078" href="Data.Vec.N-ary.html#1447" class="Function">∀ⁿ</a> <a id="3081" href="Relation.Binary.Reflection.html#3024" class="Bound">n</a> <a id="3083" class="Symbol">(</a><a id="3084" href="Data.Vec.N-ary.html#1065" class="Function">curryⁿ</a> <a id="3091" class="Symbol">λ</a> <a id="3093" href="Relation.Binary.Reflection.html#3093" class="Bound">ρ</a> <a id="3095" class="Symbol">→</a>
                 <a id="3114" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦</a> <a id="3116" href="Agda.Builtin.Sigma.html#155" class="Field">proj₁</a> <a id="3122" class="Symbol">(</a><a id="3123" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="3129" href="Relation.Binary.Reflection.html#3024" class="Bound">n</a> <a id="3131" href="Relation.Binary.Reflection.html#3027" class="Bound">f</a><a id="3132" class="Symbol">)</a> <a id="3134" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⇓⟧</a> <a id="3137" href="Relation.Binary.Reflection.html#3093" class="Bound">ρ</a> <a id="3139" href="Relation.Binary.html#2012" class="Function Operator">≈</a> <a id="3141" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⟦</a> <a id="3143" href="Agda.Builtin.Sigma.html#167" class="Field">proj₂</a> <a id="3149" class="Symbol">(</a><a id="3150" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="3156" href="Relation.Binary.Reflection.html#3024" class="Bound">n</a> <a id="3158" href="Relation.Binary.Reflection.html#3027" class="Bound">f</a><a id="3159" class="Symbol">)</a> <a id="3161" href="Relation.Binary.Reflection.html#1323" class="Bound Operator">⇓⟧</a> <a id="3164" href="Relation.Binary.Reflection.html#3093" class="Bound">ρ</a> <a id="3166" class="Symbol">→</a>
                 <a id="3185" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦</a> <a id="3187" href="Agda.Builtin.Sigma.html#155" class="Field">proj₁</a> <a id="3193" class="Symbol">(</a><a id="3194" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="3200" href="Relation.Binary.Reflection.html#3024" class="Bound">n</a> <a id="3202" href="Relation.Binary.Reflection.html#3027" class="Bound">f</a><a id="3203" class="Symbol">)</a>  <a id="3206" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟧</a> <a id="3208" href="Relation.Binary.Reflection.html#3093" class="Bound">ρ</a> <a id="3210" href="Relation.Binary.html#2012" class="Function Operator">≈</a> <a id="3212" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟦</a> <a id="3214" href="Agda.Builtin.Sigma.html#167" class="Field">proj₂</a> <a id="3220" class="Symbol">(</a><a id="3221" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="3227" href="Relation.Binary.Reflection.html#3024" class="Bound">n</a> <a id="3229" href="Relation.Binary.Reflection.html#3027" class="Bound">f</a><a id="3230" class="Symbol">)</a>  <a id="3233" href="Relation.Binary.Reflection.html#1319" class="Bound Operator">⟧</a> <a id="3235" href="Relation.Binary.Reflection.html#3093" class="Bound">ρ</a><a id="3236" class="Symbol">)</a>
<a id="3238" href="Relation.Binary.Reflection.html#3013" class="Function">solve₁</a> <a id="3245" href="Relation.Binary.Reflection.html#3245" class="Bound">n</a> <a id="3247" href="Relation.Binary.Reflection.html#3247" class="Bound">f</a> <a id="3249" class="Symbol">=</a>
  <a id="3253" href="Function.Equivalence.html#760" class="Field">Equivalence.from</a> <a id="3270" class="Symbol">(</a><a id="3271" href="Data.Vec.N-ary.html#3068" class="Function">uncurry-∀ⁿ</a> <a id="3282" href="Relation.Binary.Reflection.html#3245" class="Bound">n</a><a id="3283" class="Symbol">)</a> <a id="3285" href="Function.Equality.html#824" class="Field Operator">⟨$⟩</a> <a id="3289" class="Symbol">λ</a> <a id="3291" href="Relation.Binary.Reflection.html#3291" class="Bound">ρ</a> <a id="3293" class="Symbol">→</a>
    <a id="3299" href="Relation.Binary.PropositionalEquality.Core.html#971" class="Function">P.subst</a> <a id="3307" href="Function.html#1097" class="Function">id</a> <a id="3310" class="Symbol">(</a><a id="3311" href="Relation.Binary.PropositionalEquality.Core.html#867" class="Function">P.sym</a> <a id="3317" class="Symbol">(</a><a id="3318" href="Data.Vec.N-ary.html#2615" class="Function">left-inverse</a> <a id="3331" class="Symbol">(λ</a> <a id="3334" href="Relation.Binary.Reflection.html#3334" class="Bound">_</a> <a id="3336" class="Symbol">→</a> <a id="3338" class="Symbol">_</a> <a id="3340" href="Relation.Binary.html#2012" class="Function Operator">≈</a> <a id="3342" class="Symbol">_</a> <a id="3344" class="Symbol">→</a> <a id="3346" class="Symbol">_</a> <a id="3348" href="Relation.Binary.html#2012" class="Function Operator">≈</a> <a id="3350" class="Symbol">_)</a> <a id="3353" href="Relation.Binary.Reflection.html#3291" class="Bound">ρ</a><a id="3354" class="Symbol">))</a>
      <a id="3363" class="Symbol">(</a><a id="3364" href="Relation.Binary.Reflection.html#1725" class="Function">prove</a> <a id="3370" href="Relation.Binary.Reflection.html#3291" class="Bound">ρ</a> <a id="3372" class="Symbol">(</a><a id="3373" href="Agda.Builtin.Sigma.html#155" class="Field">proj₁</a> <a id="3379" class="Symbol">(</a><a id="3380" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="3386" href="Relation.Binary.Reflection.html#3245" class="Bound">n</a> <a id="3388" href="Relation.Binary.Reflection.html#3247" class="Bound">f</a><a id="3389" class="Symbol">))</a> <a id="3392" class="Symbol">(</a><a id="3393" href="Agda.Builtin.Sigma.html#167" class="Field">proj₂</a> <a id="3399" class="Symbol">(</a><a id="3400" href="Relation.Binary.Reflection.html#2005" class="Function">close</a> <a id="3406" href="Relation.Binary.Reflection.html#3245" class="Bound">n</a> <a id="3408" href="Relation.Binary.Reflection.html#3247" class="Bound">f</a><a id="3409" class="Symbol">)))</a>

<a id="3414" class="Comment">-- A variant of _,_ which is intended to make uses of solve and solve₁</a>
<a id="3485" class="Comment">-- look a bit nicer.</a>

<a id="3507" class="Keyword">infix</a> <a id="3513" class="Number">4</a> <a id="3515" href="Relation.Binary.Reflection.html#3520" class="Function Operator">_⊜_</a>

<a id="_⊜_"></a><a id="3520" href="Relation.Binary.Reflection.html#3520" class="Function Operator">_⊜_</a> <a id="3524" class="Symbol">:</a> <a id="3526" class="Symbol">∀</a> <a id="3528" class="Symbol">{</a><a id="3529" href="Relation.Binary.Reflection.html#3529" class="Bound">n</a><a id="3530" class="Symbol">}</a> <a id="3532" class="Symbol">→</a> <a id="3534" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="3539" href="Relation.Binary.Reflection.html#3529" class="Bound">n</a> <a id="3541" class="Symbol">→</a> <a id="3543" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="3548" href="Relation.Binary.Reflection.html#3529" class="Bound">n</a> <a id="3550" class="Symbol">→</a> <a id="3552" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="3557" href="Relation.Binary.Reflection.html#3529" class="Bound">n</a> <a id="3559" href="Data.Product.html#1382" class="Function Operator">×</a> <a id="3561" href="Relation.Binary.Reflection.html#1211" class="Bound">Expr</a> <a id="3566" href="Relation.Binary.Reflection.html#3529" class="Bound">n</a>
<a id="3568" href="Relation.Binary.Reflection.html#3520" class="Function Operator">_⊜_</a> <a id="3572" class="Symbol">=</a> <a id="3574" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">_,_</a>
</pre></body></html>